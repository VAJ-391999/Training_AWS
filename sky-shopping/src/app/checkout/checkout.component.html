<app-loader *ngIf="loader | async"></app-loader>
<div class="checkout" *ngIf="!(loader | async)">
  <div class="checkout-title">
    <p>Checkout</p>
  </div>
  <div class="checkout-detail">
    <div class="checkout-info">
      <div class="residential-info">
        <form [formGroup]="orderForm" (ngSubmit)="placeOrder(orderForm)">
          <mat-form-field class="addressLine1-field" appearance="fill">
            <mat-label>Address line 1</mat-label>
            <input
              type="text"
              name="addressLine1"
              id="addressLine1"
              matInput
              formControlName="addressLine1"
              placeholder="Street 10"
            />
            <mat-error
              *ngIf="orderForm.get('addressLine1')!.hasError('required')"
            >
              Address Line1 is required filed
            </mat-error>
            <mat-error
              *ngIf="orderForm.get('addressLine1')!.hasError('minlength')"
            >
              Address Line1 must at least 3 character long
            </mat-error>
            <mat-error
              *ngIf="orderForm.get('addressLine1')!.hasError('maxlength')"
            >
              Address Line1 must not have more than 20 characters
            </mat-error>
          </mat-form-field>

          <mat-form-field class="addressLine1-field" appearance="fill">
            <mat-label>Address line 2</mat-label>
            <input
              type="text"
              name="addressLine2"
              id="addressLine2"
              matInput
              formControlName="addressLine2"
              placeholder="Street 10"
            />
            <mat-error
              *ngIf="orderForm.get('addressLine2')!.hasError('required')"
            >
              Address Line2 is required filed
            </mat-error>
            <mat-error
              *ngIf="orderForm.get('addressLine2')!.hasError('minlength')"
            >
              Address Line2 must at least 3 character long
            </mat-error>
            <mat-error
              *ngIf="orderForm.get('addressLine2')!.hasError('maxlength')"
            >
              Address Line2 must not have more than 20 characters
            </mat-error>
          </mat-form-field>

          <mat-form-field class="city-field" appearance="fill">
            <mat-label>City</mat-label>
            <input
              type="text"
              name="city"
              id="city"
              matInput
              formControlName="city"
              placeholder="Veraval"
            />
            <mat-error *ngIf="orderForm.get('city')!.hasError('required')">
              City is required filed
            </mat-error>
          </mat-form-field>

          <mat-form-field class="district-field" appearance="fill">
            <mat-label>District</mat-label>
            <input
              type="text"
              name="district"
              id="district"
              matInput
              formControlName="district"
              placeholder="Gir Somnath"
            />
            <mat-error *ngIf="orderForm.get('district')!.hasError('required')">
              District is required filed
            </mat-error>
          </mat-form-field>

          <mat-form-field class="state-field" appearance="fill">
            <mat-label>State</mat-label>
            <input
              type="text"
              name="state"
              id="state"
              matInput
              formControlName="state"
              placeholder="Gujarat"
            />
            <mat-error *ngIf="orderForm.get('state')!.hasError('required')">
              State is required filed
            </mat-error>
          </mat-form-field>

          <mat-form-field class="country-field" appearance="fill">
            <mat-label>Country</mat-label>
            <input
              type="text"
              name="country"
              id="country"
              matInput
              formControlName="country"
              placeholder="India"
            />
            <mat-error *ngIf="orderForm.get('country')!.hasError('required')">
              Country is required filed
            </mat-error>
          </mat-form-field>

          <mat-form-field class="postalCode-field" appearance="fill">
            <mat-label>Postal Code</mat-label>
            <input
              type="text"
              name="postalCode"
              id="postalCode"
              matInput
              formControlName="postalCode"
              placeholder="362261"
            />
            <mat-error
              *ngIf="orderForm.get('postalCode')!.hasError('required')"
            >
              Postal Code is required filed
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Payment Method</mat-label>
            <mat-select formControlName="paymentMethod" required>
              <mat-option
                *ngFor="let paymentMethod of paymentMethodList"
                [value]="paymentMethod"
              >
                {{ paymentMethod }}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="orderForm.get('postalCode')!.hasError('required')"
              >Payment method is required</mat-error
            >
          </mat-form-field>

          <button
            class="btn-checkout"
            mat-raised-button
            color="primary"
            [disabled]="!orderForm.valid"
          >
            Place Order
          </button>
        </form>
      </div>
      <div class="payment-info">payment</div>
    </div>
    <div class="order-summary">
      <div class="order-summary-title">
        <p>Order Summary</p>
      </div>
      <div class="order-item-info">
        <mat-card class="example-card" *ngFor="let item of orderSummary.items">
          <mat-card-title-group>
            <mat-card-title>{{ item.product.name }}</mat-card-title>
            <mat-card-subtitle
              >Price: {{ item.product.unitPrice }} Rs.</mat-card-subtitle
            >
            <mat-card-subtitle>Qty: {{ item.quantity }}</mat-card-subtitle>
            <img mat-card-sm-image [src]="item.product.imageUrl" />
          </mat-card-title-group>
        </mat-card>
      </div>
    </div>
  </div>
</div>
